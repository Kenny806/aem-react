The goal of the AEM ([Adobe Experience Manager](http://www.adobe.com/de/marketing-cloud/enterprise-content-management.html)) React library is to use [React](https://facebook.github.io/react/) as a templating engine
for AEM components. React is a popular javascript ui library by facebook.

# Why React and AEM?

React components are ideal to create web applications with complex client-side interactivity. AEM provides a perfect authoring interface for web content.
This project brings these technologies together, so that you can build highly interactive web pages with a professional authoring tool.

# Features

- [Universal](http://www.2ality.com/2015/08/isomorphic-javascript.html) React rendering
- High performance javascript execution with a pool of Java 8 [nashorn](https://docs.oracle.com/javase/8/docs/technotes/guides/scripting/nashorn/) engines.
- Nesting React components in other AEM components and vice versa is supported.
- Converting vanilla (plain) react components into AEM components is supported.
- SPA based on react router is supported.

# Projects

## AEM project

The [aem-react project](https://github.com/sinnerschrader/aem-react) consists of the following parts:

- osgi bundle contains the Sling Script Engine to render AEM components written in react.
- maven archetype is a fork of the AEM archetype and adds react support and examples.
- demo content package provides examples for components and SPA.

Maven artifact is available via [maven central](http://search.maven.org/#search%7Cga%7C1%7Caem-react)

## Javascript project

The aem-react projects relies on the [aem-react-js subproject](https://github.com/sinnerschrader/aem-react-js), which provides
the basic javascript funtionality. It is
available as [npm
 module](https://www.npmjs.com/package/aem-react-js).


## Maven archetype project

Lastly a [maven-archetype](https://github.com/sinnerschrader/aem-project-archetype) is avilable to quickly create an AEM maven project including react components.
It is a fork of the existing offical [AEM maven archetype](https://github.com/Adobe-Marketing-Cloud/aem-project-archetype).

Maven artifact is available via [maven central](http://search.maven.org/#search%7Cga%7C1%7Csinnerschrader)

> # Version [[info]]
> This documentation always describes the latest version (not release) of these projects.


# Prerequisites

-  `>=` Java 8 (Oracle JDK with nashorn engine)
-  `>=` AEM 6.1

## Compatibility with different AEM versions

For compatibility issues with AEM 6.0 service packs have to be inspected to understand if the required OSGI bundles are
provided. 

The compatibility between different AEM versions depends on different aspects of the state of
OSGI bundles deployed.

A required service interface is the `org.apache.sling.models.factory.ModelFactory`, which is not available in versions
of the bundle prior to
```
<dependency>
  <groupId>org.apache.sling</groupId>
  <artifactId>org.apache.sling.models.api</artifactId>
  <version>1.2.0</version>
  <scope>provided</scope>
</dependency>
```
A rough overview of the bundles provided by AEM releases.

| SYMBOLIC NAME OF THE BUNDLE | AEM 5.6.1     | AEM 6.0 | AEM 6.1 (GA) | AEM 6.2 (GA) | AEM 6.3 (GA) |
|-----------------------------|---------------|---------|--------------|--------------|--------------|
| org.apache.sling.models.api | not available | 1.0.2   | 1.1.0        | 1.2.2        | 1.3.2        |

The bundle is not provided in vanilla AEM instances prior to version 6.2. If needed in 6.1,
[AEM Cumulative Fix Pack 6.1 SP2-CFP14](https://helpx.adobe.com/experience-manager/release-notes--aem-6-1-cumulative-fix-pack-.html/experience-manager/release-notes--aem-6-1-cumulative-fix-pack-.html) contains
`org.apache.sling.scripting.sightly.models.provider/1.0.0`, which requires
```
<dependency>
  <groupId>org.apache.sling</groupId>
  <artifactId>org.apache.sling.models.api</artifactId>
  <version>1.2.2</version>
  <scope>provided</scope>
</dependency>
```
so it is assumed, that with the cumulative package deployed, AEM React should be usable.

## AEM 6.3 caveats

While exported packages seem to be only a problem with the `org.apache.sling.models.api` bundle, version ranges appear
to be a problem as well. Creating a release referencing an updated version of `org.apache.sling.api.resource` via
```
<dependency>
  <groupId>com.adobe.aem</groupId>
  <artifactId>uber-jar</artifactId>
  <classifier>apis</classifier>
  <scope>provided</scope>
  <version>6.3.0</version>
</dependency>
```
which contains latest versions of the package, resolves the issue.

Referencing `com.sinnerschrader.vw.aem.react-core-0.6.15.3`
* `org.apache.sling.api.resource,version=[2.9,2.10) -- Cannot be resolved`
* Provided by AEM with service pack 1 and cumulative pack 2 deployed.
  ```
  <dependency>
    <groupId>org.apache.sling</groupId>
    <artifactId>org.apache.sling.api</artifactId>
    <version>2.16.2</version>
    <scope>provided</scope>
  </dependency>
  ```
  which is the reason why version ranges in package imports are omitted.
  
